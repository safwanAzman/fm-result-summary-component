import React,{useState} from 'react';
import Head from 'next/head'
import { Inter } from 'next/font/google';
import Card from '@/components/Card';
import {data} from '../data/index';
import CountUp from 'react-countup';
import lottie from 'lottie-web';
import animate from '@/components/animate.json'

const inter = Inter({ subsets: ['latin'] })

export default function Home() {
  const [doneCount, setDoneCount] = useState(false)
  return (
    <>
      <Head>
        <title>Results summary component</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="container-main">
        <div className="container-main-sub">
          <div className="container-sub">
              <div className="container-parent-left">
                <h1 className="myFontBold text-neutral-lightLavender text-2xl mb-4">
                  Your Result
                </h1>
                <div className="relative">
                    <div className="container-circle ">
                        <div className="space-y-1">
                            <CountUp 
                              end={76} 
                              duration={2.00}
                              className="myFontExtraBold text-white text-7xl"
                              onEnd={() => setDoneCount(true)}
                            />
                            <p className="myFontMedium text-neutral-lightLavender text-xl">of 100</p>
                        </div>
                    </div>
                    {doneCount ? 
                    <div
                        className="absolute top-0 "
                        ref={(container) => {
                        lottie.loadAnimation({
                            container,
                            renderer: 'svg',
                            loop: false,
                            autoplay: true,
                            animationData: animate,
                        });
                    }}
                    />
                  : null}
                </div>
                <h1 className="myFontBold text-white text-4xl">Great</h1>
                <p className="myFontDefault text-neutral-lightLavender text-xl">Your performance exceed 65% of the people conducting the test here!</p>
              </div>
              <div className="container-parent-right">
                <h1 className="myFontBold text-2xl text-neutral-darkGrayBlue mb-4">
                  Summary
                </h1>
                {data.map((item,index) => (
                  <Card
                    key={index}
                    bgColor={item.bgColor}
                    textColor={item.textColor}
                    icon={item.icon}
                    category={item.category}
                    score={item.score}
                  />
                ))}
                <button className="button-submit">
                  Continue
                </button>
              </div>
          </div>
          </div>
      </main>
    </>
  )
}
